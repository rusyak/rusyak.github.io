$(function(){var a,b=$("#image"),c=$(".crop-button"),d=$("#result"),e=!1;b.cropper({aspectRatio:1,viewMode:1,built:function(){e=!0}}),c.on("click",function(){$("#myModal").modal("show");var c;e&&(c=b.cropper("getCroppedCanvas"),a=c.toDataURL(),d.attr("src",a),b.cropper("reset"))}),$(".save-as-png").on("click",function(){var b=document.createElement("a");b.href=a,b.download="image.png",b.click()}),$(".save-as-jpg").on("click",function(){var b=document.createElement("a");b.href=a,b.download="image.jpg",b.click()}),$("#upload").on("change",function(a){var c=a.target.files[0],d=new FileReader;d.onload=function(a){b.attr("src",a.target.result),$('img[crossorigin="anonymous"]').attr("src",a.target.result)},b.cropper("reset"),d.readAsDataURL(c)})});